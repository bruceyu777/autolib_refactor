# 1030876: Verify only 1 cpu is active if deploy more than 1 cpu with trial license
# 1030877: Verify license Invalid if deployed memory > 2G
# 1 CPU/2G MEM, Default VDom = 2 
################################################################

[FVM_A]
    ### 1030877.txt ###
    comments: Verify download permanent trial license from forticare

    #remove license
    execute factoryreset2    
    
    # config forticare account
    exe vm-license-options account-id fosvmqa@gmail.com
    exe vm-license-options account-password Fosvmqa123!

    exe vm-license-options show
    expect -e "Account ID: fosvmqa@gmail.com" -for 1030877 -t 5
    expect -e "Government: no" -for 1030877 -t 5

    exe vm-license
    y
    expect -e "VM license install succeeded" -for 1030877 -t 5
    sleep 20
    forcelogin
    sleep 5	
    get system status | grep 'Serial-Number' -A 10 
    expect -e "FGVMEV" -for 1030877 -t 5
    expect -e "License Status: Invalid" -for 1030877 -t 5
    expect -e "1 CPU/1 allowed" -for 1030876 -t 5

    report 1030877
    report 1030876
