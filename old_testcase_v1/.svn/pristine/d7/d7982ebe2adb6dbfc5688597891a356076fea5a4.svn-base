# 1021271ï¼šVerify FC package
# fortiguard settting default (anycast=enable)
#
#############################

[FVM_A]
    comment: Verify sul can be valided base on cpu cores with default FGD setting
    setlicense -t ULS -for SN -to lic

    #remove license
    execute factoryreset2

    sleep 60

    execute restore vmlicense tftp FVM_A:LICENSE_DIR{$lic} FVM_A:LICENSE_SERVER

    diag debug vm-print-license
    expect -e "Model: SL" -for 1015667 -t 5
    expect -e "CPU: 2147483647" -for 1015667 -t 5

    # Test 1021271: FC-Only bundle(258)
    comment: Verify 1021271: check 258 FC-Only bundle contracts
    diagnose test update info | grep "System contracts" -A 1
    setvar -e "ENHN,(.*)" -to CONTRACT

    diagnose test update info | grep FMWR
    varexpect -v {$CONTRACT} -for 1021271 -t 5

    diagnose test update info | grep FURL
    varexpect -v {$CONTRACT} -fail match -for 1021271 -t 5
    #expect -e "ENHN" -for 1021271 -t 5
    #expect -e "FMWR" -for 1021271 -t 5
    #expect -e "FURL" -fail match -for 1021271 -t 5
    #expect -e "SPAM" -fail match -for 1021271 -t 5
    #expect -e "VMLS" -for 1021271 -t 5
    #expect -e "IOTH" -fail match -for 1021271 -t 5
    #expect -e "ETDB" -fail match -for 1021271 -t 5
    #expect -e "NIDB" -fail match -for 1021271 -t 5
    #expect -e "ISDB" -fail match -for 1021271 -t 5
    #expect -e "SFAS" -fail match -for 1021271 -t 5

    report 1021271
