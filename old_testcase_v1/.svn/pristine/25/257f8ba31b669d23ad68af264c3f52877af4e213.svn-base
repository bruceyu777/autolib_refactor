# 906824ï¼šVerify no memory limitation for byol valid g-license 
# fortiguard settting default 
# 
#############################

[FVM_A]
    ### 906824.txt ###
    comments: Verify no memory limitation with g-license

    setlicense -t 08G -for SN -to lic
 
    #remove license
    execute factoryreset2    
    
    get system status | grep 'Serial-Number' -A 3
    expect -e "License Status: Invalid" -for 906824 -t 5
    
    execute restore vmlicense tftp FVM_A:LICENSE_DIR{$lic} FVM_A:LICENSE_SERVER

    sleep 30	
    get system status | grep 'Serial-Number' -A 3
    expect -e "FGVM08T" -for 906824 -t 5
    expect -e "License Status: Valid" -for 906824 -t 5
    expect -e "4 CPU/8 allowed" -for 906824 -t 5

    get system status | grep 'License' -A 3
    expect -e "VM Resources: .* RAM/allowed" -fail match -for 906824 -t 5

    diagnose debug vm-print-license
    expect -e "MEM: 2147483647" -for 906824 -t 5

    report 906824
   
